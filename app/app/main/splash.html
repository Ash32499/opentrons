<html lang="en">
  <head>
    <style>
      .log-line {
        white-space: pre-wrap;
        margin: 10px 0px 10px 0px;
      }
      .error {
        background-color: red;
      }
    </style>
    <script>
      const {ipcRenderer} = require('electron')

      function createLogger (type) {
        return function (message) {
          console.log(message)
          var logContainer = document.getElementById('log')
          var logLine = document.createElement('div')
          logLine.classList.add('log-line')
          logLine.classList.add(type)
          logLine.innerHTML = message
          logContainer.appendChild(logLine)
        }
      }

      function handleMessage(message, logger) {
        try {
          message = new TextDecoder('utf-8').decode(message)
          logger(message)
        } catch (e) {
          logger(message)
        }
      }

      const dataLogger = createLogger('data')
      const errorLogger = createLogger('error')
      ipcRenderer.on('app-env-loading-data', (event, message) => {
        handleMessage(message, dataLogger)
      })
      ipcRenderer.on('app-env-loading-error', (event, message) => {
        handleMessage(message, errorLogger)
      })
      ipcRenderer.send('splash-ready', 'ping')
    </script>
  </head>
  <body>
    <div id="log"></div>
  </body>
